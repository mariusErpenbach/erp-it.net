(()=>{var e={};e.id=985,e.ids=[985],e.modules={5:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{Ar:()=>x,HU:()=>v,aZ:()=>w,a_:()=>y});var o=r(1199);r(2087);var s=r(3636),a=r(9021),i=r.n(a),l=r(1820),c=r.n(l),d=r(3873),u=r.n(d),p=r(1942),f=r.n(p),h=r(3378),b=r(2518),m=r(3331),g=e([s]);async function v(e){try{console.log("Fetching HTML template from database...");let t=await w();if(!t)throw Error("No template found in the database.");console.log("HTML template successfully fetched from database."),console.log(`Fetched HTML content length: ${t.length}`);let r=t;Object.keys(e).forEach(t=>{let n=`{{${t}}}`,o=e[t];"ansprechpartner"===t&&""!==o.trim()&&(o+="<br/>"),r=r.replace(RegExp(n,"g"),o)});let n=c().tmpdir(),o=u().join(n,`temp-${Date.now()}.html`);i().writeFileSync(o,r,"utf-8"),console.log("Launching Puppeteer browser with no-sandbox options...");let a=await s.default.launch({args:["--no-sandbox","--disable-setuid-sandbox"]});console.log("Puppeteer browser launched successfully.");let l=await a.newPage();console.log("Reading temporary HTML file...");let d=i().readFileSync(o,"utf-8");console.log("Temporary HTML file read successfully."),await l.setContent(d),console.log("HTML content set in Puppeteer page."),console.log("Generating PDF...");let p=await l.pdf({format:"A4"});if(console.log("PDF generated successfully."),await a.close(),p&&p.length)return new Uint8Array(p);throw Error("Failed to generate PDF buffer.")}catch(e){throw console.error("Error occurred:",e),e}}async function x(e){try{let t=await (0,h.A)();if(!t)throw Error("Failed to connect to the database.");let r=t.collection("bewerbung"),n=await r.findOne({_id:new b.ObjectId(e)});return n?n.indexEntry:null}catch(e){return console.error("Error fetching template:",e),null}}async function w(){try{let e=await (0,h.A)();if(!e)throw Error("Failed to connect to the database.");let t=e.collection("bewerbung"),r=await t.find({}).toArray();if(0===r.length)throw Error("No entries found in the bewerbung collection.");return r[0].indexEntry||null}catch(e){return console.error("Error fetching first entry from bewerbung collection:",e),null}}async function y(){try{let e=await x("bewerbung");if(!e)throw Error("Template not found in the database.");i().writeFileSync("app/ui/tools/bewerbungshilfe/index.html",e,"utf-8"),console.log("index.html updated successfully from MongoDB.")}catch(e){console.error("Error fetching and writing index.html:",e)}}s=(g.then?(await g)():g)[0],f().config(),(0,m.D)([v,x,w,y]),(0,o.A)(v,"405aa90d3ee4cc5fee55d9754217042e9fff875845",null),(0,o.A)(x,"4045177bd2b946620cc856bc8bbebc21ba2e1f467f",null),(0,o.A)(w,"00e5e805638c819915999dceed116937b340af34f1",null),(0,o.A)(y,"001b8f1585b16205f8b71588bbe70cf3d60be846b5",null),n()}catch(e){n(e)}})},473:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.4.7","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","pretest":"npm run lint && npm run dts-check","test":"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^18.11.3","decache":"^4.6.2","sinon":"^14.0.1","standard":"^17.0.0","standard-version":"^9.5.0","tap":"^19.2.0","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(7413);r(1120);var o=r(6409);let s=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Bewerbungshilfe"}),(0,n.jsx)("p",{children:"Welcome to the Bewerbungshilfe page!"}),(0,n.jsx)(o.default,{})]})},1284:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(687),o=r(3210),s=r(6475);let a=(0,s.createServerReference)("405aa90d3ee4cc5fee55d9754217042e9fff875845",s.callServer,void 0,s.findSourceMapURL,"convertHtmlToPdfAndSendEmail"),i=()=>{let[e,t]=(0,o.useState)({firma:"",ansprechpartner:"",anschrift:"",ortPlz:"",datum:""}),[r,s]=(0,o.useState)(!1),[i,l]=(0,o.useState)(""),[c,d]=(0,o.useState)(!1),u=r=>{let{name:n,value:o}=r.target;t({...e,[n]:o})},p=()=>{t({firma:"",ansprechpartner:"",anschrift:"",ortPlz:"",datum:""}),l(""),d(!1)},f=async t=>{if(t.preventDefault(),!c){alert("Please enter the correct password before submitting.");return}s(!0);try{let t=await a(e),r=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download="generated.pdf",document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(n),alert("PDF downloaded successfully!"),p()}catch(e){console.error("Error sending email:",e),alert("Failed to send email. Please try again.")}finally{s(!1)}};return(0,n.jsxs)("div",{id:"bewerbungshilfe-form",children:[(0,n.jsx)("h1",{children:"Bewerbungshilfeformular"}),!c&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"k\xf6lle-alaaf"===i?(d(!0),alert("Password is correct. You are now allowed to use the form. Willkommen lieber Bewerbungshelfer")):alert("Incorrect password. Please try again.")},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",children:"Enter Password:"}),(0,n.jsx)("input",{type:"password",id:"password",value:i,onChange:e=>l(e.target.value),required:!0})]}),(0,n.jsx)("button",{type:"submit",children:"Submit Password"})]}),c&&(0,n.jsxs)("form",{onSubmit:f,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Firma:"}),(0,n.jsx)("input",{type:"text",name:"firma",value:e.firma,onChange:u,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Ansprechpartner (optional):"}),(0,n.jsx)("input",{type:"text",name:"ansprechpartner",value:e.ansprechpartner,onChange:u})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Stra\xdfe + Hausnummer:"}),(0,n.jsx)("input",{type:"text",name:"anschrift",value:e.anschrift,onChange:u,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Ort + PLZ:"}),(0,n.jsx)("input",{type:"text",name:"ortPlz",value:e.ortPlz,onChange:u,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Datum:"}),(0,n.jsx)("input",{type:"text",name:"datum",value:e.datum,onChange:u,required:!0})]}),(0,n.jsx)("button",{type:"submit",disabled:r,children:r?"Sending...":"Send PDF"})]}),r&&(0,n.jsx)("div",{className:"loading-animation",children:(0,n.jsx)("p",{children:"Loading..."})})]})}},1820:e=>{"use strict";e.exports=require("os")},1942:(e,t,r)=>{let n=r(9021),o=r(3873),s=r(1820),a=r(5511),i=r(473).version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function c(e){console.log(`[dotenv@${i}][DEBUG] ${e}`)}function d(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function u(e){let t=null;if(e&&e.path&&e.path.length>0){if(Array.isArray(e.path))for(let r of e.path)n.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`}else t=o.resolve(process.cwd(),".env.vault");return n.existsSync(t)?t:null}function p(e){return"~"===e[0]?o.join(s.homedir(),e.slice(1)):e}let f={configDotenv:function(e){let t;let r=o.resolve(process.cwd(),".env"),s="utf8",a=!!(e&&e.debug);e&&e.encoding?s=e.encoding:a&&c("No encoding is specified. UTF-8 is used by default");let i=[r];if(e&&e.path){if(Array.isArray(e.path))for(let t of(i=[],e.path))i.push(p(t));else i=[p(e.path)]}let l={};for(let r of i)try{let t=f.parse(n.readFileSync(r,{encoding:s}));f.populate(l,t,e)}catch(e){a&&c(`Failed to load ${r} ${e.message}`),t=e}let d=process.env;return(e&&null!=e.processEnv&&(d=e.processEnv),f.populate(d,l,e),t)?{parsed:l,error:t}:{parsed:l}},_configVault:function(e){console.log(`[dotenv@${i}][INFO] Loading env from encrypted .env.vault`);let t=f._parseVault(e),r=process.env;return e&&null!=e.processEnv&&(r=e.processEnv),f.populate(r,t,e),{parsed:t}},_parseVault:function(e){let t;let r=u(e),n=f.configDotenv({path:r});if(!n.parsed){let e=Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);throw e.code="MISSING_DATA",e}let o=d(e).split(","),s=o.length;for(let e=0;e<s;e++)try{let r=o[e].trim(),s=function(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){let e=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}let n=r.password;if(!n){let e=Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}let o=r.searchParams.get("environment");if(!o){let e=Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}let s=`DOTENV_VAULT_${o.toUpperCase()}`,a=e.parsed[s];if(!a){let e=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:a,key:n}}(n,r);t=f.decrypt(s.ciphertext,s.key);break}catch(t){if(e+1>=s)throw t}return f.parse(t)},config:function(e){if(0===d(e).length)return f.configDotenv(e);let t=u(e);if(!t){var r;return r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${i}][WARN] ${r}`),f.configDotenv(e)}return f._configVault(e)},decrypt:function(e,t){let r=Buffer.from(t.slice(-64),"hex"),n=Buffer.from(e,"base64"),o=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{let e=a.createDecipheriv("aes-256-gcm",r,o);return e.setAuthTag(s),`${e.update(n)}${e.final()}`}catch(n){let e=n instanceof RangeError,t="Invalid key length"===n.message,r="Unsupported state or unable to authenticate data"===n.message;if(e||t){let e=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(r){let e=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw n}},parse:function(e){let t;let r={},n=e.toString();for(n=n.replace(/\r\n?/mg,"\n");null!=(t=l.exec(n));){let e=t[1],n=t[2]||"",o=(n=n.trim())[0];n=n.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),'"'===o&&(n=(n=n.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),r[e]=n}return r},populate:function(e,t,r={}){let n=!!(r&&r.debug),o=!!(r&&r.override);if("object"!=typeof t){let e=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(let r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===o&&(e[r]=t[r]),n&&(!0===o?c(`"${r}" is already defined and WAS overwritten`):c(`"${r}" is already defined and was NOT overwritten`))):e[r]=t[r]}};e.exports.configDotenv=f.configDotenv,e.exports._configVault=f._configVault,e.exports._parseVault=f._parseVault,e.exports.config=f.config,e.exports.decrypt=f.decrypt,e.exports.parse=f.parse,e.exports.populate=f.populate,e.exports=f},2014:(e,t,r)=>{Promise.resolve().then(r.bind(r,1284))},2518:e=>{"use strict";e.exports=require("mongodb")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3378:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2518);let o=process.env.MONGO_URI,s=new n.MongoClient(o,{serverSelectionTimeoutMS:3e4}),a=async function(){try{return await s.connect(),console.log("✅ Erfolgreich mit MongoDB Atlas verbunden!"),s.db("erpnetDB")}catch(e){console.error("❌ Fehler beim Verbinden mit MongoDB:",e)}}},3636:e=>{"use strict";e.exports=import("puppeteer")},3873:e=>{"use strict";e.exports=require("path")},5471:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{"001b8f1585b16205f8b71588bbe70cf3d60be846b5":()=>o.a_,"00e5e805638c819915999dceed116937b340af34f1":()=>o.aZ,"4045177bd2b946620cc856bc8bbebc21ba2e1f467f":()=>o.Ar,"405aa90d3ee4cc5fee55d9754217042e9fff875845":()=>o.HU});var o=r(5),s=e([o]);o=(s.then?(await s)():s)[0],n()}catch(e){n(e)}})},5511:e=>{"use strict";e.exports=require("crypto")},6409:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/dci/Desktop/Github/erp-it.net/app/ui/tools/bewerbungshilfe/Bewerbungshilfeformular.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dci/Desktop/Github/erp-it.net/app/ui/tools/bewerbungshilfe/Bewerbungshilfeformular.tsx","default")},8029:(e,t,r)=>{Promise.resolve().then(r.bind(r,8226))},8226:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/dci/Desktop/Github/erp-it.net/app/tools/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dci/Desktop/Github/erp-it.net/app/tools/layout.tsx","default")},8349:(e,t,r)=>{Promise.resolve().then(r.bind(r,9036))},8454:(e,t,r)=>{Promise.resolve().then(r.bind(r,6409))},9021:e=>{"use strict";e.exports=require("fs")},9036:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(687),o=r(3210);function s({children:e}){let[t,r]=(0,o.useState)(!1);return(0,n.jsxs)("div",{children:[(0,n.jsx)("header",{className:"mb-6",children:t&&(0,n.jsx)("button",{id:"back-to-top-btn",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:"↑ Nach oben"})}),(0,n.jsx)("main",{children:e})]})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9817:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var n=r(5239),o=r(8088),s=r(8170),a=r.n(s),i=r(893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c={children:["",{children:["tools",{children:["bewerbungshilfe",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,982)),"/home/dci/Desktop/Github/erp-it.net/app/tools/bewerbungshilfe/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8226)),"/home/dci/Desktop/Github/erp-it.net/app/tools/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/home/dci/Desktop/Github/erp-it.net/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/home/dci/Desktop/Github/erp-it.net/app/tools/bewerbungshilfe/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/tools/bewerbungshilfe/page",pathname:"/tools/bewerbungshilfe",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[844,149,124],()=>r(9817));module.exports=n})();